<!doctype html>
<html lang="uz" data-lang="uz" data-theme="dark" data-eye="0">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b1220" />
  <title>G-SOFT</title>

  <link rel="icon" href="/assets/icon/asosiy.svg" />
  <link rel="stylesheet" href="/assets/css/style.css" />

  <style>
    /* Минимальный safe-base, чтобы не было горизонтального скролла даже без style.css */
    html, body { height: 100%; }
    body { margin: 0; overflow-x: hidden; }
  </style>
</head>

<body class="page page-app">
  <noscript>
    <div style="padding:16px;font-family:system-ui">
      JavaScript yoqilgan bo‘lishi kerak.
    </div>
  </noscript>

  <!-- MOBILE BACKDROP for sidebar -->
  <div id="backdrop" class="backdrop" hidden></div>

  <div class="app-shell">
    <!-- SIDEBAR -->
    <aside id="sidebar" class="sidebar" aria-label="Navigation">
      <div class="sidebar__top">
        <a class="brand brand--sidebar" href="#/main" data-nav="main">
          <img class="brand__logo" src="/assets/icon/asosiy.svg" alt="G-SOFT" />
          <div class="brand__text">
            <div class="brand__name">G-SOFT</div>
            <div class="brand__sub muted" data-i18n="app_subtitle">Boshqaruv tizimi</div>
          </div>
        </a>

        <!-- Collapse button (desktop) -->
        <button class="icon-btn sidebar__collapse" type="button" id="sidebarCollapse" aria-label="Collapse sidebar">
          <span class="burger-lines"></span>
        </button>
      </div>

      <nav class="nav">
        <a class="nav__item" href="#/main" data-route="main">
          <img class="nav__icon" src="/assets/icon/asosiy.svg" alt="" />
          <span class="nav__text" data-i18n="menu_main">Asosiy</span>
        </a>

        <a class="nav__item" href="#/tasks" data-route="tasks">
          <img class="nav__icon" src="/assets/icon/tasks.svg" alt="" />
          <span class="nav__text" data-i18n="menu_tasks">Vazifalar</span>
        </a>

        <a class="nav__item" href="#/projects" data-route="projects">
          <img class="nav__icon" src="/assets/icon/projects.svg" alt="" />
          <span class="nav__text" data-i18n="menu_projects">Loyihalar</span>
        </a>

        <a class="nav__item" href="#/courses" data-route="courses">
          <img class="nav__icon" src="/assets/icon/courses.svg" alt="" />
          <span class="nav__text" data-i18n="menu_courses">Kurslar</span>
        </a>

        <a class="nav__item" href="#/clients" data-route="clients">
          <img class="nav__icon" src="/assets/icon/clients.svg" alt="" />
          <span class="nav__text" data-i18n="menu_clients">Klientlar</span>
        </a>

        <!-- admin only -->
        <a class="nav__item" href="#/settings" data-route="settings" data-role-only="admin">
          <img class="nav__icon" src="/assets/icon/settings.svg" alt="" />
          <span class="nav__text" data-i18n="menu_settings">Sozlamalar</span>
        </a>

        <a class="nav__item" href="#/users" data-route="users" data-role-only="admin">
          <img class="nav__icon" src="/assets/icon/users.svg" alt="" />
          <span class="nav__text" data-i18n="menu_users">Foydalanuvchilar</span>
        </a>
      </nav>

      <!-- MOBILE SETTINGS (shown inside menu on mobile, hidden on desktop by CSS) -->
      <div class="sidebar__mobile-settings" id="mobileSettings">
        <div class="divider"></div>

        <div class="side-section">
          <div class="side-section__title" data-i18n="menu_profile">Profil</div>
          <div class="side-kv">
            <div class="side-kv__k" data-i18n="me_user">Foydalanuvchi</div>
            <div class="side-kv__v" id="meName">—</div>
          </div>
          <div class="side-kv">
            <div class="side-kv__k" data-i18n="me_role">Rol</div>
            <div class="side-kv__v" id="meRole">—</div>
          </div>
        </div>

        <div class="side-section">
          <div class="side-section__title" data-i18n="menu_interface">Interfeys</div>

          <div class="side-row">
            <div class="side-row__label" data-i18n="ui_lang">Til</div>
            <div class="seg" role="group" aria-label="Language">
              <button class="seg__btn" type="button" data-lang-btn="uz">UZ</button>
              <button class="seg__btn" type="button" data-lang-btn="ru">RU</button>
              <button class="seg__btn" type="button" data-lang-btn="en">EN</button>
            </div>
          </div>

          <div class="side-row">
            <div class="side-row__label" data-i18n="ui_theme">Rejim</div>
            <button class="icon-btn" type="button" id="themeToggle" aria-label="Theme">
              <img src="/assets/icon/dark.svg" alt="" />
            </button>
          </div>

          <div class="side-row">
            <div class="side-row__label" data-i18n="ui_eye">Ko‘z himoyasi</div>
            <button class="icon-btn" type="button" id="eyeToggle" aria-label="Eye protection">
              <img src="/assets/icon/eye.svg" alt="" />
            </button>
          </div>
        </div>

        <div class="divider"></div>

        <button class="btn btn-ghost w-100" type="button" id="logoutBtnMobile">
          <span data-i18n="logout">Chiqish</span>
        </button>
      </div>

      <div class="sidebar__bottom">
        <div class="small muted sidebar__hint" data-i18n="sidebar_hint">
          Menyu ustiga olib borsangiz ochiladi
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <div class="app-main">
      <!-- HEADER -->
      <header class="topbar">
        <div class="topbar__left">
          <button class="icon-btn topbar__burger" type="button" id="sidebarBurger" aria-label="Open menu">
            <span class="burger-lines"></span>
          </button>

          <div class="crumbs">
            <div class="crumbs__title" id="pageTitle" data-i18n="menu_main">Asosiy</div>
            <div class="crumbs__sub muted" id="pageSub"></div>
          </div>
        </div>

        <div class="topbar__right">
          <!-- Desktop header controls (hidden on mobile by CSS) -->
          <div class="topbar__kv">
            <div class="topbar__kv-title" data-i18n="me_user">Foydalanuvchi</div>
            <div class="topbar__kv-value" id="meNameDesk">—</div>
          </div>

          <div class="topbar__kv">
            <div class="topbar__kv-title" data-i18n="me_time">Vaqt</div>
            <div class="topbar__kv-value" id="nowTashkent">—</div>
          </div>

          <div class="topbar__actions">
            <div class="seg topbar__seg" role="group" aria-label="Language">
              <button class="seg__btn" type="button" data-lang-btn="uz">UZ</button>
              <button class="seg__btn" type="button" data-lang-btn="ru">RU</button>
              <button class="seg__btn" type="button" data-lang-btn="en">EN</button>
            </div>

            <button class="icon-btn" type="button" id="themeToggleDesk" aria-label="Theme">
              <img src="/assets/icon/dark.svg" alt="" />
            </button>

            <button class="icon-btn" type="button" id="eyeToggleDesk" aria-label="Eye protection">
              <img src="/assets/icon/eye.svg" alt="" />
            </button>

            <button class="btn btn-ghost" type="button" id="logoutBtn">
              <span data-i18n="logout">Chiqish</span>
            </button>
          </div>
        </div>
      </header>

      <!-- CONTENT -->
      <main id="viewRoot" class="view-root" role="main" aria-live="polite">
        <!-- index.js will render pages here -->
        <div class="page-loading" id="pageLoading">
          <div class="spinner"></div>
          <div class="muted" data-i18n="loading">Yuklanmoqda...</div>
        </div>
      </main>
    </div>
  </div>

  <!-- MODAL ROOT (blur/backdrop handled by CSS/JS) -->
  <div id="modalRoot" class="modal-root" hidden></div>

  <!-- TOASTS -->
  <div id="toast-root" class="toast-root" aria-live="polite" aria-atomic="true"></div>

  <!-- CONFIRM DIALOG (optional) -->
  <div id="confirmRoot" class="confirm-root" hidden></div>

  <!-- scripts -->
  <script src="/assets/js/lang.js"></script>
  <script type="module" src="/assets/js/index.js"></script>
</body>
</html>
